---
title: "02 Creating your own custom theme with an AI Assist"
author: "Jeremy Mikecz"
format: html
editor: visual
---

# Creating your own visualization theme

Large Language Models can serve as helpful assistants for coding. Some keys:

-   learn the basics of the language (i.e. R) and the tools you want to use (i.e. ggplot, etc.).

-   Write specific, precise prompts describing the data you are working with (include precise details like column names), what you want to do, the tools you want to use to do (if you have a preference), and model the output you want the model to return

-   for complex projects start simple, for multi-step tasks, do one step at a time

-   don't expect perfect results on your first pass; instead engage in a conversation with the LLM as you troubleshoot errors and fine-tune results

-   use LLMs to explain syntax you don't understand and ask for suggestions to alternative approaches

-   use AI in ways that enhances your learning rather than replacing it

-   cite your use when required; don't use it when prohibited; never become dependent or lazy

-   always take responsibility for your work; never submit AI-assisted work you cannot explain or defend.

-   chose a LLM appropriate for the task; choose a strong coding LLM for complex tasks (i.e. Claude Sonnet or Opus); choose a basic, cheaper LLM for simpler tasks

An example approach:

```         
# start small

1. show me the key elements of a custom theme in ggplot

2. create a simple script for a custom ggplot theme that incorporates [color scheme]; modern, bold fonts; [describe symbology]; ...

# test the code in R; identify discrete chunks and run each one at a time

# build incrementally

3. add a light background

4. simplify the axes, showing only major gridlines

# troubleshoot any errors:

5. I received this error [insert error message] when running this code: [insert code cell/chunk]

# ask questions / refine

6. How can I make the legend smaller, but retain its legibility?
```

## Exercise: Create your own custom ggplot theme

1.  Create your own custom ggplot theme in a separate .R script.
2.  You can then create the plot below and apply the custom theme to the plot using this syntax:

```         
source("path_to_my_custom_theme.R")

# custom theme script contains a theme named `theme_custom`
p +  # existing plot code
    theme_custom()
```

\*\*Apply your custom theme to the Gapminder plot (or to a dataset and plot of your choosing). Then submit a screenshot of the results alongside a short description of your design choices and the reasoning behind them to the CANVAS page for this assignment.

## 1. Setup + Reload Gapminder data

Before beginning with customization, let's first reload our gapminder visualization.

```{r}
library(tidyverse)
library(viridis)
library(systemfonts)
library(showtext)
```

```{r}
df <- read.csv("../../week3/data/gapminder.csv")
head(df)
```

## 2. Create static scatterplot of Gapminder data

This is the same code we developed in the previous notebook.

```{r}
yr = 2007
tempdf <- df |>
    filter(year == yr)

p <- ggplot(tempdf, aes(x= gdpPercap, y=lifeExp, color=continent, size=pop)) +
    geom_point(alpha=0.6) +
    scale_x_continuous(trans="log10") +
    scale_size_continuous(range = c(1, 15)) +
    labs(x="GDP per capita", y = "Life expectancy at birth (years)", 
         title = sprintf("Scatterplot: per capita GDP vs. life expectancy, %s", yr),
       caption = "(Based on data from Hans Rosling - gapminder.com)", 
       color = 'Continent',
       size = "Population")
    #scale_color_viridis(discrete=TRUE, option="turbo")

p
```

## 3. Using a LLM

1.  Visit [Dartmouth Chat](chat.dartmouth.edu) or a LLM provider of your choosing.
2.  Choose a reliable LLM for use helping you write code.
3.  Write a detailed prompt specifically requesting R code to create a new ggplot theme according to the specifications you outlined in your Visual Style Guide.
4.  Here's a simple prompt example:

```         
Create a new custom ggplot theme that includes the following elements:

1. uses the Playfair font famiy for titles and subtitles
     
2. the Raleway font family for all other text

3. color-blind friendly color palettes with an emphasis on blues

4. a background that gives the feel of 19th century lithograpic-printed graphics
     
5. a general historical look
```

Review and test out the code that is returned. Refine your instructions and engage in a conversation with the LLM. Copy and paste the code into a new `.R` script.
